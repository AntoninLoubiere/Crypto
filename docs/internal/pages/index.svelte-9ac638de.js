import{S as re,i as ne,s as oe,G as $e,e as b,c as y,a as v,d as c,b as _,M as ee,g as B,H as Ee,I as Ie,J as we,q as I,o as C,w as Y,x as j,y as F,B as J,t as P,k as N,h as O,m as V,F as u,j as Ke,n as ae,p as ie,N as le,O as ue,P as fe,Q as Z,R as X,T as ce,E as te,U as Ae,V as Te}from"../chunks/index-031e6f9d.js";import{b as Ne,c as Ve,g as Ce}from"../chunks/index-aa2a4886.js";import{M as ve,g as ke}from"../chunks/Modal-6f93e231.js";import"../chunks/singletons-d1fb5791.js";function Be(o){let e,t;const n=o[2].default,l=$e(n,o,o[1],null);return{c(){e=b("div"),l&&l.c(),this.h()},l(s){e=y(s,"DIV",{class:!0});var r=v(e);l&&l.l(r),r.forEach(c),this.h()},h(){_(e,"class","rounded-full border px-2 py-1 text-xs uppercase svelte-lh9gt8"),ee(e,"red",o[0]=="red"),ee(e,"blue",o[0]=="blue"),ee(e,"green",o[0]=="green")},m(s,r){B(s,e,r),l&&l.m(e,null),t=!0},p(s,[r]){l&&l.p&&(!t||r&2)&&Ee(l,n,s,s[1],t?we(n,s[1],r,null):Ie(s[1]),null),r&1&&ee(e,"red",s[0]=="red"),r&1&&ee(e,"blue",s[0]=="blue"),r&1&&ee(e,"green",s[0]=="green")},i(s){t||(I(l,s),t=!0)},o(s){C(l,s),t=!1},d(s){s&&c(e),l&&l.d(s)}}}function Pe(o,e,t){let{$$slots:n={},$$scope:l}=e,{color:s}=e;return o.$$set=r=>{"color"in r&&t(0,s=r.color),"$$scope"in r&&t(1,l=r.$$scope)},[s,l,n]}class pe extends re{constructor(e){super(),ne(this,e,Pe,Be,oe,{color:0})}}function me(o){let e,t;return e=new pe({props:{color:"green",$$slots:{default:[Oe]},$$scope:{ctx:o}}}),{c(){Y(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,l){F(e,n,l),t=!0},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Oe(o){let e;return{c(){e=P("Secret")},l(t){e=O(t,"Secret")},m(t,n){B(t,e,n)},d(t){t&&c(e)}}}function he(o){let e,t;return e=new pe({props:{color:"blue",$$slots:{default:[qe]},$$scope:{ctx:o}}}),{c(){Y(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,l){F(e,n,l),t=!0},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function qe(o){let e;return{c(){e=P("Cl\xE9 publique")},l(t){e=O(t,"Cl\xE9 publique")},m(t,n){B(t,e,n)},d(t){t&&c(e)}}}function ge(o){let e,t;return e=new pe({props:{color:"red",$$slots:{default:[Ge]},$$scope:{ctx:o}}}),{c(){Y(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,l){F(e,n,l),t=!0},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Ge(o){let e;return{c(){e=P("Cl\xE9 priv\xE9e")},l(t){e=O(t,"Cl\xE9 priv\xE9e")},m(t,n){B(t,e,n)},d(t){t&&c(e)}}}function Le(o){let e,t,n=o[0].name+"",l,s,r,a,i,m,d=o[0].secretKey&&me(o),f=o[0].publicKey&&he(o),p=o[0].privateKey&&ge(o);return{c(){e=b("a"),t=b("h3"),l=P(n),s=N(),d&&d.c(),r=N(),f&&f.c(),a=N(),p&&p.c(),this.h()},l(g){e=y(g,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var k=v(e);t=y(k,"H3",{class:!0});var G=v(t);l=O(G,n),G.forEach(c),s=V(k),d&&d.l(k),r=V(k),f&&f.l(k),a=V(k),p&&p.l(k),k.forEach(c),this.h()},h(){_(t,"class","h3 inline max-w-full overflow-hidden text-ellipsis whitespace-nowrap"),_(e,"sveltekit:prefetch",""),_(e,"href",i="/Crypto/key/?key="+o[0].keyId),_(e,"class","flex flex-wrap items-center gap-2 px-3 py-2 hover:bg-gray-300 group-last:rounded-b-xl dark:hover:bg-gray-600")},m(g,k){B(g,e,k),u(e,t),u(t,l),u(e,s),d&&d.m(e,null),u(e,r),f&&f.m(e,null),u(e,a),p&&p.m(e,null),m=!0},p(g,[k]){(!m||k&1)&&n!==(n=g[0].name+"")&&Ke(l,n),g[0].secretKey?d?k&1&&I(d,1):(d=me(g),d.c(),I(d,1),d.m(e,r)):d&&(ae(),C(d,1,1,()=>{d=null}),ie()),g[0].publicKey?f?k&1&&I(f,1):(f=he(g),f.c(),I(f,1),f.m(e,a)):f&&(ae(),C(f,1,1,()=>{f=null}),ie()),g[0].privateKey?p?k&1&&I(p,1):(p=ge(g),p.c(),I(p,1),p.m(e,null)):p&&(ae(),C(p,1,1,()=>{p=null}),ie()),(!m||k&1&&i!==(i="/Crypto/key/?key="+g[0].keyId))&&_(e,"href",i)},i(g){m||(I(d),I(f),I(p),m=!0)},o(g){C(d),C(f),C(p),m=!1},d(g){g&&c(e),d&&d.d(),f&&f.d(),p&&p.d()}}}function De(o,e,t){let{key:n}=e;return o.$$set=l=>{"key"in l&&t(0,n=l.key)},[n]}class Ue extends re{constructor(e){super(),ne(this,e,De,Le,oe,{key:0})}}function Se(o){let e,t,n,l,s,r,a,i,m,d,f,p,g,k,G,E,T,L,K;return{c(){e=b("div"),t=b("label"),n=P("Nom:"),l=N(),s=b("input"),r=N(),a=b("p"),i=b("i"),m=P(`Options non disponible actuellement... G\xE9n\xE9reras une paire de cl\xE9 RSA-OAEP (chiffrement
            asym\xE9trique).`),d=N(),f=b("div"),p=b("button"),g=P("G\xE9n\xE9rer"),G=N(),E=b("button"),T=P("Annuler"),this.h()},l($){e=y($,"DIV",{class:!0});var w=v(e);t=y(w,"LABEL",{for:!0});var M=v(t);n=O(M,"Nom:"),M.forEach(c),l=V(w),s=y(w,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),w.forEach(c),r=V($),a=y($,"P",{});var S=v(a);i=y(S,"I",{class:!0});var z=v(i);m=O(z,`Options non disponible actuellement... G\xE9n\xE9reras une paire de cl\xE9 RSA-OAEP (chiffrement
            asym\xE9trique).`),z.forEach(c),S.forEach(c),d=V($),f=y($,"DIV",{class:!0});var D=v(f);p=y(D,"BUTTON",{class:!0});var Q=v(p);g=O(Q,"G\xE9n\xE9rer"),Q.forEach(c),G=V(D),E=y(D,"BUTTON",{class:!0});var U=v(E);T=O(U,"Annuler"),U.forEach(c),D.forEach(c),this.h()},h(){_(t,"for","name"),_(s,"type","text"),_(s,"class","input flex-grow"),_(s,"id","name"),_(s,"placeholder","Nom de la cl\xE9"),s.required=!0,_(e,"class","flex items-center gap-2"),_(i,"class","opacity-50"),_(p,"class","button-coloured"),p.disabled=k=!o[4]||o[3],_(E,"class","button-text"),_(f,"class","flex flex-col md:flex-row-reverse md:gap-2")},m($,w){B($,e,w),u(e,t),u(t,n),u(e,l),u(e,s),o[6](s),Z(s,o[1]),B($,r,w),B($,a,w),u(a,i),u(i,m),B($,d,w),B($,f,w),u(f,p),u(p,g),u(f,G),u(f,E),u(E,T),L||(K=[X(s,"input",o[7]),X(p,"click",o[5])],L=!0)},p($,w){w&2&&s.value!==$[1]&&Z(s,$[1]),w&24&&k!==(k=!$[4]||$[3])&&(p.disabled=k)},d($){$&&c(e),o[6](null),$&&c(r),$&&c(a),$&&c(d),$&&c(f),L=!1,ce(K)}}}function Re(o){let e,t;return{c(){e=b("span"),t=P("G\xE9n\xE9rer une cl\xE9"),this.h()},l(n){e=y(n,"SPAN",{slot:!0});var l=v(e);t=O(l,"G\xE9n\xE9rer une cl\xE9"),l.forEach(c),this.h()},h(){_(e,"slot","title")},m(n,l){B(n,e,l),u(e,t)},p:te,d(n){n&&c(e)}}}function Me(o){let e,t,n;function l(r){o[8](r)}let s={$$slots:{title:[Re],default:[Se]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.opened=o[0]),e=new ve({props:s}),le.push(()=>ue(e,"opened",l)),{c(){Y(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,a){F(e,r,a),n=!0},p(r,[a]){const i={};a&542&&(i.$$scope={dirty:a,ctx:r}),!t&&a&1&&(t=!0,i.opened=r[0],fe(()=>t=!1)),e.$set(i)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function He(o,e,t){let n,{opened:l}=e,s="",r,a=!1;async function i(){t(3,a=!0);try{let p=await Ne("RSA-OAEP",s);ke(`/Crypto/key?key=${p.keyId}`)}finally{t(3,a=!1)}}function m(p){le[p?"unshift":"push"](()=>{r=p,t(2,r)})}function d(){s=this.value,t(1,s),t(0,l),t(2,r)}function f(p){l=p,t(0,l)}return o.$$set=p=>{"opened"in p&&t(0,l=p.opened)},o.$$.update=()=>{o.$$.dirty&5&&(l?r&&r.focus():(t(1,s=""),t(3,a=!1))),o.$$.dirty&2&&t(4,n=!!s.length)},[l,s,r,a,n,i,m,d,f]}class ze extends re{constructor(e){super(),ne(this,e,He,Me,oe,{opened:0})}}function Xe(o){let e,t,n,l,s,r,a,i,m,d,f,p,g,k,G,E,T,L,K,$,w,M,S,z,D,Q;return{c(){e=b("div"),t=b("div"),n=b("label"),l=P("Nom:"),s=N(),r=b("input"),a=N(),i=b("label"),m=P("Cl\xE9 publique :"),d=N(),f=b("textarea"),p=N(),g=b("label"),k=P("Cl\xE9 priv\xE9e (optionnelle) :"),G=N(),E=b("textarea"),T=N(),L=b("div"),K=b("button"),$=P("Importer"),M=N(),S=b("button"),z=P("Annuler"),this.h()},l(U){e=y(U,"DIV",{class:!0});var A=v(e);t=y(A,"DIV",{class:!0});var x=v(t);n=y(x,"LABEL",{for:!0});var se=v(n);l=O(se,"Nom:"),se.forEach(c),s=V(x),r=y(x,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),x.forEach(c),a=V(A),i=y(A,"LABEL",{for:!0});var h=v(i);m=O(h,"Cl\xE9 publique :"),h.forEach(c),d=V(A),f=y(A,"TEXTAREA",{id:!0,class:!0,placeholder:!0}),v(f).forEach(c),p=V(A),g=y(A,"LABEL",{for:!0});var q=v(g);k=O(q,"Cl\xE9 priv\xE9e (optionnelle) :"),q.forEach(c),G=V(A),E=y(A,"TEXTAREA",{id:!0,class:!0,placeholder:!0}),v(E).forEach(c),T=V(A),L=y(A,"DIV",{class:!0});var R=v(L);K=y(R,"BUTTON",{class:!0});var W=v(K);$=O(W,"Importer"),W.forEach(c),M=V(R),S=y(R,"BUTTON",{class:!0});var H=v(S);z=O(H,"Annuler"),H.forEach(c),R.forEach(c),A.forEach(c),this.h()},h(){_(n,"for","name"),_(r,"type","text"),_(r,"class","input flex-grow"),_(r,"id","name"),_(r,"placeholder","Nom de la cl\xE9"),r.required=!0,_(t,"class","flex items-center gap-2"),_(i,"for","publicKey"),_(f,"id","publicKey"),_(f,"class","textarea h-40 w-full"),f.required=!0,_(f,"placeholder","-----BEGIN PUBLIC KEY----- \u2026"),_(g,"for","privateKey"),_(E,"id","privateKey"),_(E,"class","textarea h-40 w-full"),_(E,"placeholder","-----BEGIN PRIVATE KEY----- \u2026"),_(K,"class","button-coloured"),K.disabled=w=!o[6]||o[5],_(S,"class","button-text"),_(L,"class","flex flex-col md:flex-row-reverse md:gap-2"),_(e,"class","flex flex-col gap-2")},m(U,A){B(U,e,A),u(e,t),u(t,n),u(n,l),u(t,s),u(t,r),o[8](r),Z(r,o[1]),u(e,a),u(e,i),u(i,m),u(e,d),u(e,f),Z(f,o[2]),u(e,p),u(e,g),u(g,k),u(e,G),u(e,E),Z(E,o[4]),u(e,T),u(e,L),u(L,K),u(K,$),u(L,M),u(L,S),u(S,z),D||(Q=[X(r,"input",o[9]),X(f,"input",o[10]),X(E,"input",o[11]),X(K,"click",o[7]),X(S,"click",o[12])],D=!0)},p(U,A){A&2&&r.value!==U[1]&&Z(r,U[1]),A&4&&Z(f,U[2]),A&16&&Z(E,U[4]),A&96&&w!==(w=!U[6]||U[5])&&(K.disabled=w)},d(U){U&&c(e),o[8](null),D=!1,ce(Q)}}}function Ye(o){let e,t;return{c(){e=b("span"),t=P("Importer une cl\xE9"),this.h()},l(n){e=y(n,"SPAN",{slot:!0});var l=v(e);t=O(l,"Importer une cl\xE9"),l.forEach(c),this.h()},h(){_(e,"slot","title")},m(n,l){B(n,e,l),u(e,t)},p:te,d(n){n&&c(e)}}}function je(o){let e,t,n;function l(r){o[13](r)}let s={$$slots:{title:[Ye],default:[Xe]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.opened=o[0]),e=new ve({props:s}),le.push(()=>ue(e,"opened",l)),{c(){Y(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,a){F(e,r,a),n=!0},p(r,[a]){const i={};a&16511&&(i.$$scope={dirty:a,ctx:r}),!t&&a&1&&(t=!0,i.opened=r[0],fe(()=>t=!1)),e.$set(i)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function Fe(o,e,t){let n,{opened:l}=e,s="",r="",a="",i=!1,m;async function d(){t(5,i=!0);try{const T=await Ve("RSA-OAEP",{key:r,privateKey:a.length?a:void 0},s);ke(`/Crypto/key?key=${T.keyId}`)}finally{t(5,i=!1)}}function f(T){le[T?"unshift":"push"](()=>{m=T,t(3,m)})}function p(){s=this.value,t(1,s),t(0,l),t(3,m)}function g(){r=this.value,t(2,r)}function k(){a=this.value,t(4,a)}const G=()=>t(0,l=!1);function E(T){l=T,t(0,l)}return o.$$set=T=>{"opened"in T&&t(0,l=T.opened)},o.$$.update=()=>{o.$$.dirty&9&&(l?m&&m.focus():(t(1,s=""),t(5,i=!1))),o.$$.dirty&6&&t(6,n=!!s.length&&r.length)},[l,s,r,m,a,i,n,d,f,p,g,k,G,E]}class Je extends re{constructor(e){super(),ne(this,e,Fe,je,oe,{opened:0})}}function be(o,e,t){const n=o.slice();return n[8]=e[t],n}function Qe(o){let e,t,n,l,s,r;return{c(){e=b("div"),t=b("h3"),n=P("Aucune cl\xE9 disponible."),l=N(),s=b("p"),r=P("Veuillez en g\xE9n\xE9rer ou en importer une."),this.h()},l(a){e=y(a,"DIV",{class:!0});var i=v(e);t=y(i,"H3",{class:!0});var m=v(t);n=O(m,"Aucune cl\xE9 disponible."),m.forEach(c),l=V(i),s=y(i,"P",{});var d=v(s);r=O(d,"Veuillez en g\xE9n\xE9rer ou en importer une."),d.forEach(c),i.forEach(c),this.h()},h(){_(t,"class","h3"),_(e,"class","mx-3 pb-3")},m(a,i){B(a,e,i),u(e,t),u(t,n),u(e,l),u(e,s),u(s,r)},p:te,i:te,o:te,d(a){a&&c(e)}}}function We(o){let e,t,n=o[0],l=[];for(let r=0;r<n.length;r+=1)l[r]=ye(be(o,n,r));const s=r=>C(l[r],1,1,()=>{l[r]=null});return{c(){e=b("ul");for(let r=0;r<l.length;r+=1)l[r].c()},l(r){e=y(r,"UL",{});var a=v(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(c)},m(r,a){B(r,e,a);for(let i=0;i<l.length;i+=1)l[i].m(e,null);t=!0},p(r,a){if(a&1){n=r[0];let i;for(i=0;i<n.length;i+=1){const m=be(r,n,i);l[i]?(l[i].p(m,a),I(l[i],1)):(l[i]=ye(m),l[i].c(),I(l[i],1),l[i].m(e,null))}for(ae(),i=n.length;i<l.length;i+=1)s(i);ie()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)I(l[a]);t=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)C(l[a]);t=!1},d(r){r&&c(e),Ae(l,r)}}}function ye(o){let e,t,n;return t=new Ue({props:{key:o[8]}}),{c(){e=b("li"),Y(t.$$.fragment),this.h()},l(l){e=y(l,"LI",{class:!0});var s=v(e);j(t.$$.fragment,s),s.forEach(c),this.h()},h(){_(e,"class","group")},m(l,s){B(l,e,s),F(t,e,null),n=!0},p(l,s){const r={};s&1&&(r.key=l[8]),t.$set(r)},i(l){n||(I(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){l&&c(e),J(t)}}}function Ze(o){let e,t,n,l,s,r,a,i,m,d,f,p,g,k,G,E,T,L,K,$,w,M,S;const z=[We,Qe],D=[];function Q(h,q){return h[0].length?0:1}r=Q(o),a=D[r]=z[r](o);function U(h){o[5](h)}let A={};o[1]!==void 0&&(A.opened=o[1]),E=new ze({props:A}),le.push(()=>ue(E,"opened",U));function x(h){o[6](h)}let se={};return o[2]!==void 0&&(se.opened=o[2]),K=new Je({props:se}),le.push(()=>ue(K,"opened",x)),{c(){e=b("div"),t=b("div"),n=b("h1"),l=P("Vos cl\xE9s"),s=N(),a.c(),i=N(),m=b("div"),d=b("button"),f=P("Importer une cl\xE9"),p=N(),g=b("button"),k=P("G\xE9n\xE9rer une cl\xE9"),G=N(),Y(E.$$.fragment),L=N(),Y(K.$$.fragment),this.h()},l(h){e=y(h,"DIV",{class:!0});var q=v(e);t=y(q,"DIV",{class:!0});var R=v(t);n=y(R,"H1",{class:!0});var W=v(n);l=O(W,"Vos cl\xE9s"),W.forEach(c),s=V(R),a.l(R),R.forEach(c),i=V(q),m=y(q,"DIV",{class:!0});var H=v(m);d=y(H,"BUTTON",{class:!0});var de=v(d);f=O(de,"Importer une cl\xE9"),de.forEach(c),p=V(H),g=y(H,"BUTTON",{class:!0});var _e=v(g);k=O(_e,"G\xE9n\xE9rer une cl\xE9"),_e.forEach(c),H.forEach(c),q.forEach(c),G=V(h),j(E.$$.fragment,h),L=V(h),j(K.$$.fragment,h),this.h()},h(){_(n,"class","h1 my-2 text-center"),_(t,"class","m-2 rounded-xl bg-gray-100 pt-1 dark:bg-gray-800"),_(d,"class","button-coloured flex-grow"),_(g,"class","button-coloured flex-grow"),_(m,"class","m-2 grid grid-rows-2 md:grid-cols-2 md:gap-2"),_(e,"class","m-auto max-w-2xl ")},m(h,q){B(h,e,q),u(e,t),u(t,n),u(n,l),u(t,s),D[r].m(t,null),u(e,i),u(e,m),u(m,d),u(d,f),u(m,p),u(m,g),u(g,k),B(h,G,q),F(E,h,q),B(h,L,q),F(K,h,q),w=!0,M||(S=[X(d,"click",o[3]),X(g,"click",o[4])],M=!0)},p(h,[q]){let R=r;r=Q(h),r===R?D[r].p(h,q):(ae(),C(D[R],1,1,()=>{D[R]=null}),ie(),a=D[r],a?a.p(h,q):(a=D[r]=z[r](h),a.c()),I(a,1),a.m(t,null));const W={};!T&&q&2&&(T=!0,W.opened=h[1],fe(()=>T=!1)),E.$set(W);const H={};!$&&q&4&&($=!0,H.opened=h[2],fe(()=>$=!1)),K.$set(H)},i(h){w||(I(a),I(E.$$.fragment,h),I(K.$$.fragment,h),w=!0)},o(h){C(a),C(E.$$.fragment,h),C(K.$$.fragment,h),w=!1},d(h){h&&c(e),D[r].d(),h&&c(G),J(E,h),h&&c(L),J(K,h),M=!1,ce(S)}}}function xe(o,e,t){let n=[],l=!1,s=!1;async function r(){{let f=await Ce();t(0,n=await f.getAll("cryptoKeys"))}}r();const a=()=>t(2,s=!0),i=()=>t(1,l=!0);function m(f){l=f,t(1,l)}function d(f){s=f,t(2,s)}return[n,l,s,a,i,m,d]}class et extends re{constructor(e){super(),ne(this,e,xe,Ze,oe,{})}}function tt(o){let e,t,n;return t=new et({}),{c(){e=N(),Y(t.$$.fragment),this.h()},l(l){Te('[data-svelte="svelte-vue21i"]',document.head).forEach(c),e=V(l),j(t.$$.fragment,l),this.h()},h(){document.title="Crypto"},m(l,s){B(l,e,s),F(t,l,s),n=!0},p:te,i(l){n||(I(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){l&&c(e),J(t,l)}}}class st extends re{constructor(e){super(),ne(this,e,null,tt,oe,{})}}export{st as default};
