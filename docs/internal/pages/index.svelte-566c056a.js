import{S as le,i as re,s as ne,G as $e,e as $,c as k,a as I,d as p,b as m,M as ee,g as L,H as ke,I as Ee,J as Ie,q as T,o as V,w as X,x as Y,y as j,B as F,t as P,k as C,h as O,m as B,F as i,j as we,n as se,p as ae,N as te,O as ie,P as ue,Q as Z,R as x,T as ce,E as pe,U as Ke,V as Ae}from"../chunks/index-031e6f9d.js";import{b as Te,c as Ne,g as Ce,d as Be}from"../chunks/index-30fa01b8.js";import{M as ye,g as ve}from"../chunks/Modal-6f93e231.js";import"../chunks/singletons-d1fb5791.js";function Ve(r){let e,t;const l=r[2].default,n=$e(l,r,r[1],null);return{c(){e=$("div"),n&&n.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=I(e);n&&n.l(o),o.forEach(p),this.h()},h(){m(e,"class","rounded-full border px-2 py-1 text-xs uppercase svelte-lh9gt8"),ee(e,"red",r[0]=="red"),ee(e,"blue",r[0]=="blue"),ee(e,"green",r[0]=="green")},m(s,o){L(s,e,o),n&&n.m(e,null),t=!0},p(s,[o]){n&&n.p&&(!t||o&2)&&ke(n,l,s,s[1],t?Ie(l,s[1],o,null):Ee(s[1]),null),o&1&&ee(e,"red",s[0]=="red"),o&1&&ee(e,"blue",s[0]=="blue"),o&1&&ee(e,"green",s[0]=="green")},i(s){t||(T(n,s),t=!0)},o(s){V(n,s),t=!1},d(s){s&&p(e),n&&n.d(s)}}}function Pe(r,e,t){let{$$slots:l={},$$scope:n}=e,{color:s}=e;return r.$$set=o=>{"color"in o&&t(0,s=o.color),"$$scope"in o&&t(1,n=o.$$scope)},[s,n,l]}class de extends le{constructor(e){super(),re(this,e,Pe,Ve,ne,{color:0})}}function me(r){let e,t;return e=new de({props:{color:"green",$$slots:{default:[Oe]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function Oe(r){let e;return{c(){e=P("Secret")},l(t){e=O(t,"Secret")},m(t,l){L(t,e,l)},d(t){t&&p(e)}}}function _e(r){let e,t;return e=new de({props:{color:"blue",$$slots:{default:[qe]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function qe(r){let e;return{c(){e=P("Cl\xE9 publique")},l(t){e=O(t,"Cl\xE9 publique")},m(t,l){L(t,e,l)},d(t){t&&p(e)}}}function he(r){let e,t;return e=new de({props:{color:"red",$$slots:{default:[Ge]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function Ge(r){let e;return{c(){e=P("Cl\xE9 priv\xE9e")},l(t){e=O(t,"Cl\xE9 priv\xE9e")},m(t,l){L(t,e,l)},d(t){t&&p(e)}}}function De(r){let e,t,l=r[0].name+"",n,s,o,f,d,E,_=r[0].secretKey&&me(r),a=r[0].publicKey&&_e(r),c=r[0].privateKey&&he(r);return{c(){e=$("a"),t=$("h3"),n=P(l),s=C(),_&&_.c(),o=C(),a&&a.c(),f=C(),c&&c.c(),this.h()},l(g){e=k(g,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var h=I(e);t=k(h,"H3",{class:!0});var S=I(t);n=O(S,l),S.forEach(p),s=B(h),_&&_.l(h),o=B(h),a&&a.l(h),f=B(h),c&&c.l(h),h.forEach(p),this.h()},h(){m(t,"class","h3 inline max-w-full overflow-hidden text-ellipsis whitespace-nowrap"),m(e,"sveltekit:prefetch",""),m(e,"href",d="/Crypto/key/?key="+r[0].keyId),m(e,"class","flex flex-wrap items-center gap-2 px-3 py-2 last:rounded-b-xl hover:bg-gray-300 dark:hover:bg-gray-600")},m(g,h){L(g,e,h),i(e,t),i(t,n),i(e,s),_&&_.m(e,null),i(e,o),a&&a.m(e,null),i(e,f),c&&c.m(e,null),E=!0},p(g,[h]){(!E||h&1)&&l!==(l=g[0].name+"")&&we(n,l),g[0].secretKey?_?h&1&&T(_,1):(_=me(g),_.c(),T(_,1),_.m(e,o)):_&&(se(),V(_,1,1,()=>{_=null}),ae()),g[0].publicKey?a?h&1&&T(a,1):(a=_e(g),a.c(),T(a,1),a.m(e,f)):a&&(se(),V(a,1,1,()=>{a=null}),ae()),g[0].privateKey?c?h&1&&T(c,1):(c=he(g),c.c(),T(c,1),c.m(e,null)):c&&(se(),V(c,1,1,()=>{c=null}),ae()),(!E||h&1&&d!==(d="/Crypto/key/?key="+g[0].keyId))&&m(e,"href",d)},i(g){E||(T(_),T(a),T(c),E=!0)},o(g){V(_),V(a),V(c),E=!1},d(g){g&&p(e),_&&_.d(),a&&a.d(),c&&c.d()}}}function Le(r,e,t){let{key:l}=e;return r.$$set=n=>{"key"in n&&t(0,l=n.key)},[l]}class Se extends le{constructor(e){super(),re(this,e,Le,De,ne,{key:0})}}function Ue(r){let e,t,l,n,s,o,f,d,E,_,a,c,g,h,S,y,q,U,G;return{c(){e=$("div"),t=$("label"),l=P("Nom:"),n=C(),s=$("input"),o=C(),f=$("p"),d=$("i"),E=P(`Options non disponible actuellement... G\xE9n\xE9reras une paire de cl\xE9 RSA-OAEP (chiffrement
            asym\xE9trique).`),_=C(),a=$("div"),c=$("button"),g=P("G\xE9n\xE9rer"),S=C(),y=$("button"),q=P("Annuler"),this.h()},l(v){e=k(v,"DIV",{class:!0});var N=I(e);t=k(N,"LABEL",{for:!0});var R=I(t);l=O(R,"Nom:"),R.forEach(p),n=B(N),s=k(N,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),N.forEach(p),o=B(v),f=k(v,"P",{});var b=I(f);d=k(b,"I",{class:!0});var J=I(d);E=O(J,`Options non disponible actuellement... G\xE9n\xE9reras une paire de cl\xE9 RSA-OAEP (chiffrement
            asym\xE9trique).`),J.forEach(p),b.forEach(p),_=B(v),a=k(v,"DIV",{class:!0});var H=I(a);c=k(H,"BUTTON",{class:!0});var Q=I(c);g=O(Q,"G\xE9n\xE9rer"),Q.forEach(p),S=B(H),y=k(H,"BUTTON",{class:!0});var D=I(y);q=O(D,"Annuler"),D.forEach(p),H.forEach(p),this.h()},h(){m(t,"for","name"),m(s,"type","text"),m(s,"class","input flex-grow"),m(s,"id","name"),m(s,"placeholder","Nom de la cl\xE9"),s.required=!0,m(e,"class","flex items-center gap-2"),m(d,"class","opacity-50"),m(c,"class","button-coloured"),c.disabled=h=!r[4]||r[3],m(y,"class","button-text"),m(a,"class","flex flex-col md:flex-row-reverse md:gap-2")},m(v,N){L(v,e,N),i(e,t),i(t,l),i(e,n),i(e,s),r[6](s),Z(s,r[1]),L(v,o,N),L(v,f,N),i(f,d),i(d,E),L(v,_,N),L(v,a,N),i(a,c),i(c,g),i(a,S),i(a,y),i(y,q),U||(G=[x(s,"input",r[7]),x(c,"click",r[5])],U=!0)},p(v,N){N&2&&s.value!==v[1]&&Z(s,v[1]),N&24&&h!==(h=!v[4]||v[3])&&(c.disabled=h)},d(v){v&&p(e),r[6](null),v&&p(o),v&&p(f),v&&p(_),v&&p(a),U=!1,ce(G)}}}function Re(r){let e,t;return{c(){e=$("span"),t=P("G\xE9n\xE9rer une cl\xE9"),this.h()},l(l){e=k(l,"SPAN",{slot:!0});var n=I(e);t=O(n,"G\xE9n\xE9rer une cl\xE9"),n.forEach(p),this.h()},h(){m(e,"slot","title")},m(l,n){L(l,e,n),i(e,t)},p:pe,d(l){l&&p(e)}}}function Me(r){let e,t,l;function n(o){r[8](o)}let s={$$slots:{title:[Re],default:[Ue]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.opened=r[0]),e=new ye({props:s}),te.push(()=>ie(e,"opened",n)),{c(){X(e.$$.fragment)},l(o){Y(e.$$.fragment,o)},m(o,f){j(e,o,f),l=!0},p(o,[f]){const d={};f&542&&(d.$$scope={dirty:f,ctx:o}),!t&&f&1&&(t=!0,d.opened=o[0],ue(()=>t=!1)),e.$set(d)},i(o){l||(T(e.$$.fragment,o),l=!0)},o(o){V(e.$$.fragment,o),l=!1},d(o){F(e,o)}}}function He(r,e,t){let l,{opened:n}=e,s="",o,f=!1;async function d(){t(3,f=!0);try{let c=await Te("RSA-OAEP",s);ve(`/Crypto/key?key=${c.keyId}`)}finally{t(3,f=!1)}}function E(c){te[c?"unshift":"push"](()=>{o=c,t(2,o)})}function _(){s=this.value,t(1,s),t(0,n),t(2,o)}function a(c){n=c,t(0,n)}return r.$$set=c=>{"opened"in c&&t(0,n=c.opened)},r.$$.update=()=>{r.$$.dirty&5&&(n?o&&o.focus():(t(1,s=""),t(3,f=!1))),r.$$.dirty&2&&t(4,l=!!s.length)},[n,s,o,f,l,d,E,_,a]}class Xe extends le{constructor(e){super(),re(this,e,He,Me,ne,{opened:0})}}function Ye(r){let e,t,l,n,s,o,f,d,E,_,a,c,g,h,S,y,q,U,G,v,N,R,b,J,H,Q;return{c(){e=$("div"),t=$("div"),l=$("label"),n=P("Nom:"),s=C(),o=$("input"),f=C(),d=$("label"),E=P("Cl\xE9 publique :"),_=C(),a=$("textarea"),c=C(),g=$("label"),h=P("Cl\xE9 priv\xE9e (optionnelle) :"),S=C(),y=$("textarea"),q=C(),U=$("div"),G=$("button"),v=P("Importer"),R=C(),b=$("button"),J=P("Annuler"),this.h()},l(D){e=k(D,"DIV",{class:!0});var A=I(e);t=k(A,"DIV",{class:!0});var u=I(t);l=k(u,"LABEL",{for:!0});var w=I(l);n=O(w,"Nom:"),w.forEach(p),s=B(u),o=k(u,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),u.forEach(p),f=B(A),d=k(A,"LABEL",{for:!0});var M=I(d);E=O(M,"Cl\xE9 publique :"),M.forEach(p),_=B(A),a=k(A,"TEXTAREA",{id:!0,class:!0,placeholder:!0}),I(a).forEach(p),c=B(A),g=k(A,"LABEL",{for:!0});var z=I(g);h=O(z,"Cl\xE9 priv\xE9e (optionnelle) :"),z.forEach(p),S=B(A),y=k(A,"TEXTAREA",{id:!0,class:!0,placeholder:!0}),I(y).forEach(p),q=B(A),U=k(A,"DIV",{class:!0});var K=I(U);G=k(K,"BUTTON",{class:!0});var W=I(G);v=O(W,"Importer"),W.forEach(p),R=B(K),b=k(K,"BUTTON",{class:!0});var oe=I(b);J=O(oe,"Annuler"),oe.forEach(p),K.forEach(p),A.forEach(p),this.h()},h(){m(l,"for","name"),m(o,"type","text"),m(o,"class","input flex-grow"),m(o,"id","name"),m(o,"placeholder","Nom de la cl\xE9"),o.required=!0,m(t,"class","flex items-center gap-2"),m(d,"for","publicKey"),m(a,"id","publicKey"),m(a,"class","textarea h-40 w-full"),a.required=!0,m(a,"placeholder","-----BEGIN PUBLIC KEY----- \u2026"),m(g,"for","privateKey"),m(y,"id","privateKey"),m(y,"class","textarea h-40 w-full"),m(y,"placeholder","-----BEGIN PRIVATE KEY----- \u2026"),m(G,"class","button-coloured"),G.disabled=N=!r[6]||r[5],m(b,"class","button-text"),m(U,"class","flex flex-col md:flex-row-reverse md:gap-2"),m(e,"class","flex flex-col gap-2")},m(D,A){L(D,e,A),i(e,t),i(t,l),i(l,n),i(t,s),i(t,o),r[8](o),Z(o,r[1]),i(e,f),i(e,d),i(d,E),i(e,_),i(e,a),Z(a,r[2]),i(e,c),i(e,g),i(g,h),i(e,S),i(e,y),Z(y,r[4]),i(e,q),i(e,U),i(U,G),i(G,v),i(U,R),i(U,b),i(b,J),H||(Q=[x(o,"input",r[9]),x(a,"input",r[10]),x(y,"input",r[11]),x(G,"click",r[7])],H=!0)},p(D,A){A&2&&o.value!==D[1]&&Z(o,D[1]),A&4&&Z(a,D[2]),A&16&&Z(y,D[4]),A&96&&N!==(N=!D[6]||D[5])&&(G.disabled=N)},d(D){D&&p(e),r[8](null),H=!1,ce(Q)}}}function je(r){let e,t;return{c(){e=$("span"),t=P("Importer une cl\xE9"),this.h()},l(l){e=k(l,"SPAN",{slot:!0});var n=I(e);t=O(n,"Importer une cl\xE9"),n.forEach(p),this.h()},h(){m(e,"slot","title")},m(l,n){L(l,e,n),i(e,t)},p:pe,d(l){l&&p(e)}}}function Fe(r){let e,t,l;function n(o){r[12](o)}let s={$$slots:{title:[je],default:[Ye]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.opened=r[0]),e=new ye({props:s}),te.push(()=>ie(e,"opened",n)),{c(){X(e.$$.fragment)},l(o){Y(e.$$.fragment,o)},m(o,f){j(e,o,f),l=!0},p(o,[f]){const d={};f&8318&&(d.$$scope={dirty:f,ctx:o}),!t&&f&1&&(t=!0,d.opened=o[0],ue(()=>t=!1)),e.$set(d)},i(o){l||(T(e.$$.fragment,o),l=!0)},o(o){V(e.$$.fragment,o),l=!1},d(o){F(e,o)}}}function Je(r,e,t){let l,{opened:n}=e,s="",o="",f="",d=!1,E;async function _(){t(5,d=!0);try{const y=await Ne("RSA-OAEP",{key:o,privateKey:f.length?f:void 0},s);ve(`/Crypto/key?key=${y.keyId}`)}finally{t(5,d=!1)}}function a(y){te[y?"unshift":"push"](()=>{E=y,t(3,E)})}function c(){s=this.value,t(1,s),t(0,n),t(3,E)}function g(){o=this.value,t(2,o)}function h(){f=this.value,t(4,f)}function S(y){n=y,t(0,n)}return r.$$set=y=>{"opened"in y&&t(0,n=y.opened)},r.$$.update=()=>{r.$$.dirty&9&&(n?E&&E.focus():(t(1,s=""),t(5,d=!1))),r.$$.dirty&6&&t(6,l=!!s.length&&o.length)},[n,s,o,E,f,d,l,_,a,c,g,h,S]}class Qe extends le{constructor(e){super(),re(this,e,Je,Fe,ne,{opened:0})}}function ge(r,e,t){const l=r.slice();return l[8]=e[t],l}function be(r){let e,t;return e=new Se({props:{key:r[8]}}),{c(){X(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){j(e,l,n),t=!0},p(l,n){const s={};n&1&&(s.key=l[8]),e.$set(s)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function ze(r){let e,t,l,n,s,o,f,d,E,_,a,c,g,h,S,y,q,U,G,v,N,R=r[0],b=[];for(let u=0;u<R.length;u+=1)b[u]=be(ge(r,R,u));const J=u=>V(b[u],1,1,()=>{b[u]=null});function H(u){r[5](u)}let Q={};r[1]!==void 0&&(Q.opened=r[1]),h=new Xe({props:Q}),te.push(()=>ie(h,"opened",H));function D(u){r[6](u)}let A={};return r[2]!==void 0&&(A.opened=r[2]),q=new Qe({props:A}),te.push(()=>ie(q,"opened",D)),{c(){e=$("div"),t=$("div"),l=$("h1"),n=P("Vos cl\xE9s"),s=C();for(let u=0;u<b.length;u+=1)b[u].c();o=C(),f=$("div"),d=$("button"),E=P("Importer une cl\xE9"),_=C(),a=$("button"),c=P("G\xE9n\xE9rer une cl\xE9"),g=C(),X(h.$$.fragment),y=C(),X(q.$$.fragment),this.h()},l(u){e=k(u,"DIV",{class:!0});var w=I(e);t=k(w,"DIV",{class:!0});var M=I(t);l=k(M,"H1",{class:!0});var z=I(l);n=O(z,"Vos cl\xE9s"),z.forEach(p),s=B(M);for(let fe=0;fe<b.length;fe+=1)b[fe].l(M);M.forEach(p),o=B(w),f=k(w,"DIV",{class:!0});var K=I(f);d=k(K,"BUTTON",{class:!0});var W=I(d);E=O(W,"Importer une cl\xE9"),W.forEach(p),_=B(K),a=k(K,"BUTTON",{class:!0});var oe=I(a);c=O(oe,"G\xE9n\xE9rer une cl\xE9"),oe.forEach(p),K.forEach(p),w.forEach(p),g=B(u),Y(h.$$.fragment,u),y=B(u),Y(q.$$.fragment,u),this.h()},h(){m(l,"class","h1 my-2 text-center"),m(t,"class","m-2 rounded-xl bg-gray-100 pt-1 dark:bg-gray-800"),m(d,"class","button-coloured flex-grow"),m(a,"class","button-coloured flex-grow"),m(f,"class","m-2 grid grid-rows-2 md:grid-cols-2 md:gap-2"),m(e,"class","m-auto max-w-2xl ")},m(u,w){L(u,e,w),i(e,t),i(t,l),i(l,n),i(t,s);for(let M=0;M<b.length;M+=1)b[M].m(t,null);i(e,o),i(e,f),i(f,d),i(d,E),i(f,_),i(f,a),i(a,c),L(u,g,w),j(h,u,w),L(u,y,w),j(q,u,w),G=!0,v||(N=[x(d,"click",r[3]),x(a,"click",r[4])],v=!0)},p(u,[w]){if(w&1){R=u[0];let K;for(K=0;K<R.length;K+=1){const W=ge(u,R,K);b[K]?(b[K].p(W,w),T(b[K],1)):(b[K]=be(W),b[K].c(),T(b[K],1),b[K].m(t,null))}for(se(),K=R.length;K<b.length;K+=1)J(K);ae()}const M={};!S&&w&2&&(S=!0,M.opened=u[1],ue(()=>S=!1)),h.$set(M);const z={};!U&&w&4&&(U=!0,z.opened=u[2],ue(()=>U=!1)),q.$set(z)},i(u){if(!G){for(let w=0;w<R.length;w+=1)T(b[w]);T(h.$$.fragment,u),T(q.$$.fragment,u),G=!0}},o(u){b=b.filter(Boolean);for(let w=0;w<b.length;w+=1)V(b[w]);V(h.$$.fragment,u),V(q.$$.fragment,u),G=!1},d(u){u&&p(e),Ke(b,u),u&&p(g),F(h,u),u&&p(y),F(q,u),v=!1,ce(N)}}}function We(r,e,t){let l=[],n=!1,s=!1;async function o(){{let a=await Ce();t(0,l=await a.getAll("cryptoKeys")),l.length||Be(0)}}o();const f=()=>t(2,s=!0),d=()=>t(1,n=!0);function E(a){n=a,t(1,n)}function _(a){s=a,t(2,s)}return[l,n,s,f,d,E,_]}class Ze extends le{constructor(e){super(),re(this,e,We,ze,ne,{})}}function xe(r){let e,t,l;return t=new Ze({}),{c(){e=C(),X(t.$$.fragment),this.h()},l(n){Ae('[data-svelte="svelte-vue21i"]',document.head).forEach(p),e=B(n),Y(t.$$.fragment,n),this.h()},h(){document.title="Crypto"},m(n,s){L(n,e,s),j(t,n,s),l=!0},p:pe,i(n){l||(T(t.$$.fragment,n),l=!0)},o(n){V(t.$$.fragment,n),l=!1},d(n){n&&p(e),F(t,n)}}}class nt extends le{constructor(e){super(),re(this,e,null,xe,ne,{})}}export{nt as default};
